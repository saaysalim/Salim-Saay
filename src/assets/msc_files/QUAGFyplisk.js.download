;/*FB_PKG_DELIM*/

__d("AutoDubbingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3504");b=d("FalcoLoggerInternal").create("auto_dubbing",a);e=b;g["default"]=e}),98);
__d("CometAudioLanguageSupportedLanguagesEnum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["EN","VI","ZH","HI","AR","PT","ES","DE","IT","FR","BN","ID","JA","KO","RU","TH","TR"]);c=a;f["default"]=c}),66);
__d("CometAudioLanguageUtils_doNotTranslate.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAudioLanguageUtils_doNotTranslate",selections:[{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"do_not_translate_languages_string",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("CometAudioLanguageUtils_dubbingInfo.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAudioLanguageUtils_dubbingInfo",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewer_best_language_prediction_for_dubbing",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_user_preferred_language",storageKey:null},{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"do_not_translate_languages_string",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preferred_language_string",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBDubbedTrackMap",kind:"LinkedField",name:"dubbed_track_mapping",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_lang",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dubbing_type",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("CometAudioLanguageUtils_dubtrackMapping.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAudioLanguageUtils_dubtrackMapping",selections:[{alias:null,args:null,concreteType:"XFBDubbedTrackMap",kind:"LinkedField",name:"dubbed_track_mapping",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"audio_lang",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dubbing_type",storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("XFBDubbingTypeEnum.facebook",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["AUDIODESCRIPTION","AUTODUB","BYOA","MANUALDUB","NONE"]);c=a;f["default"]=c}),66);
__d("useVideoPlayerControllerSubscriptionProvidingNullableController",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState;function a(a,b){var c=d("react-compiler-runtime").c(9),e;c[0]!==a||c[1]!==b?(e=function(){return b(a,null)},c[0]=a,c[1]=b,c[2]=e):e=c[2];e=k(e);var f=e[0],g=e[1],h=j(b),l;c[3]!==b?(e=function(){h.current=b},l=[b],c[3]=b,c[4]=e,c[5]=l):(e=c[4],l=c[5]);i(e,l);c[6]!==a?(e=function(){g(function(b){return h.current(a,b)});var b=a==null?void 0:a.subscribe(function(){g(function(b){return h.current(a,b)})});return function(){b==null||b.remove()}},l=[a],c[6]=a,c[7]=e,c[8]=l):(e=c[7],l=c[8]);i(e,l);return f}g["default"]=a}),98);
__d("CometAudioLanguageUtils",["AutoDubbingConsumptionFalcoEvent","AutoDubbingFalcoEvent","CometAudioLanguageMenuItemsMutation","CometAudioLanguageSupportedLanguagesEnum","CometAudioLanguageUtils_doNotTranslate.graphql","CometAudioLanguageUtils_dubbingInfo.graphql","CometAudioLanguageUtils_dubtrackMapping.graphql","CometRelay","CometVideoPlayerAutoDubbingWWWStrings","CurrentLocale","VideoPlayerAudioTrackUtils","cometPushToast","gkx","intlList","react","react-compiler-runtime","useVideoPlayerControllerSubscriptionProvidingNullableController"],(function(a,b,c,d,e,f,g){"use strict";var h=["label"],i,j,k,l,m=l||d("react"),n=m.useEffect;m.useMemo;var o=m.useRef,p=null,q=function(a,b,d,e,f,g){var h={client_extra_data:{dubbing_type_from:d==null?"original":d,dubbing_type_to:e==null?"original":e,lang_from:a!=null?a:"original",lang_to:b!=null?b:"original",player_type:"Reel"},event:f,video_id:g!=null?g:""};c("AutoDubbingConsumptionFalcoEvent").log(function(){return h})},r=function(a,b){var c;c=(c=a==null?void 0:a.lang)!=null?c:null;(a==null?void 0:a.lang)===null&&a.role==null&&(c=b!=null?b:null);return c};m=function(a,b,d){var e={client_extra_data:{lang:a!=null?a:""},event:d,video_id:b!=null?b:""};c("AutoDubbingConsumptionFalcoEvent").log(function(){return e})};function a(a){a=d("CometRelay").useFragment(i!==void 0?i:i=b("CometAudioLanguageUtils_dubtrackMapping.graphql"),a);return(a=a==null?void 0:a.dubbed_track_mapping)!=null?a:null}var s=function(a){var b=null;if(a!=null){b=(a=a.find(function(a){return a.dubbing_type==="NONE"&&a.audio_lang!=null}))==null?void 0:a.audio_lang}return b};function e(a,b){var e=d("react-compiler-runtime").c(7),f,g;if(e[0]!==a||e[1]!==b){var h={};f=null;if(a!=null&&b!=null){var i={};b.forEach(function(a){var b;a.dubbing_type==="NONE"&&a.audio_lang!=null?(b="Default",f=a.audio_lang):b=a.audio_lang;a=d("VideoPlayerAudioTrackUtils").getIntlDisplayName(c("CurrentLocale").get(),a.audio_lang);a!=null&&b!=null&&(i[b]=a.charAt(0).toUpperCase()+a.slice(1))});a.forEach(function(a){if(a.lang!==null&&!(a.id in h)&&a.lang in i){var b=i[a.lang];a.role==="description"&&(b=b+" \xb7 "+d("CometVideoPlayerAutoDubbingWWWStrings").AUDIO_DESCRIPTION_LABEL.toString());h[a.id]=babelHelpers["extends"]({},a,{label:b})}else if(a.displayLabel==="Default"){var c;b=d("CometVideoPlayerAutoDubbingWWWStrings").ORIGINAL_AUDIO_LABEL.toString();if(i[(c=a.lang)!=null?c:"Default"]){b=i[(c=a.lang)!=null?c:"Default"]+" \xb7 "+b}h[a.id]=babelHelpers["extends"]({},a,{label:b})}})}g=Object.values(h).sort(t);e[0]=a;e[1]=b;e[2]=f;e[3]=g}else f=e[2],g=e[3];a=g;e[4]!==f||e[5]!==a?(b={allAvailableTracks:a,originalLanguage:f},e[4]=f,e[5]=a,e[6]=b):b=e[6];g=b;return g}function t(a,b){if(a.role===null)return-1;return b.role===null?1:a.label.localeCompare(b.label)}function f(a){var c;a=d("CometRelay").useFragment(j!==void 0?j:j=b("CometAudioLanguageUtils_doNotTranslate.graphql"),a);return a==null||(c=a.audio_settings)==null?void 0:c.do_not_translate_languages_string}function u(a){var b=d("react-compiler-runtime").c(2),e;if(a==null||a.length===0)e=null;else{var f;if(b[0]!==a){var g=[];a.forEach(function(a){a=d("VideoPlayerAudioTrackUtils").getIntlDisplayName(c("CurrentLocale").get(),a);a!=null&&(a=a.charAt(0).toUpperCase()+a.slice(1),g.push(a))});g.sort();f=c("intlList")(g);b[0]=a;b[1]=f}else f=b[1];e=f}return e}var v=function(a){var b=a.controller,c=a.originalLanguage,d=a.saveAndLogPreferredLanguage,e=a.selectedTrack,f=a.setPause,g=a.setUpdatedTargetAudioTrack,i=a.updatedTargetAudioTrack;a=a.videoId;if((b==null?void 0:b.selectVideoVariant)!=null&&e){e.label;var j=babelHelpers.objectWithoutPropertiesLoose(e,h);b.selectVideoVariant({lang:j.lang,role:j.role});f(!1,"AUDIO_LANGUAGE_SELECTOR");b=r(j,c);f=r(i!=null?i:null,c);d(f,b,i==null?void 0:i.role,e.role,a);g(j)}};function w(){var a=d("react-compiler-runtime").c(2),b=d("CometRelay").useMutation(d("CometAudioLanguageMenuItemsMutation").setUserPreferredAudioLanguageDataMutation),c=b[0];a[0]!==c?(b=function(a,b,d,e,f){b!=null&&c({onCompleted:y,onError:x,variables:{input:{language_code:b}}}),q(a!=null?a:null,b!=null?b:null,d!=null?d:null,e!=null?e:null,"fb_reel_auto_dub_consumption_preferred_language_changed",f!=null?f:null)},a[0]=c,a[1]=b):b=a[1];return b}function x(){}function y(a,b){}function z(a){var e=d("react-compiler-runtime").c(4),f=c("gkx")("17327");a=d("CometRelay").useFragment(k!==void 0?k:k=b("CometAudioLanguageUtils_dubbingInfo.graphql"),a);var g=null,h=p,i=null;if(a.dubbed_track_mapping.length>0&&f){var j,l,m=(f=(f=a.dubbed_track_mapping.find(A))==null?void 0:f.audio_lang)!=null?f:null;f=!1;m!=null&&(f=a.dubbed_track_mapping.filter(function(a){return a.audio_lang===m}).length>1);j=(j=a.audio_settings)==null?void 0:j.do_not_translate_languages_string;var n=a==null||(l=a.audio_settings)==null?void 0:l.preferred_language_string,o=a==null?void 0:a.viewer_best_language_prediction_for_dubbing,q=a.audio_user_preferred_language;m!=null&&j!=null&&j.includes(m)?(h=m,g="fb_reel_auto_dub_consumption_do_not_translate_languages_match"):n!=null&&a.dubbed_track_mapping.find(function(a){return a.audio_lang===n})!=null?(h=n,g="fb_reel_auto_dub_consumption_preferred_language_match"):o!=null&&o!==m&&a.dubbed_track_mapping.find(function(a){return a.audio_lang===o})!=null?(h=o,g="fb_reel_auto_dub_consumption_blp_match"):q!=null&&q!==m&&a.dubbed_track_mapping.find(function(a){return a.audio_lang===q})!=null&&(h=q,g="fb_reel_auto_dub_consumption_fallback_to_app_lang");i=h;f&&h===m&&(h=p)}e[0]!==g||e[1]!==i||e[2]!==h?(j={event:g,lang:h,loggingLang:i},e[0]=g,e[1]=i,e[2]=h,e[3]=j):j=e[3];return j}function A(a){return a.dubbing_type==="NONE"}function B(){var a=d("react-compiler-runtime").c(1);if(a[0]===Symbol["for"]("react.memo_cache_sentinel")){var b=Array.from(c("CometAudioLanguageSupportedLanguagesEnum").members(),E),e=c("CurrentLocale").get();b=b.map(function(a){var b=d("VideoPlayerAudioTrackUtils").getIntlDisplayName(e,a);return b!=null?[a,b]:null}).filter(D);b.sort(C);a[0]=b}else b=a[0];a=b;b=a;return b}function C(a,b){return(a[1]||"").localeCompare(b[1]||"")}function D(a){return a!==null&&a[1]!=null}function E(a){return a.valueOf().toLowerCase()}var F=function(a){var b=a.availableAudioTracks,c=a.controller,d=a.currentValue,e=a.originalVideoLanguage,f=a.selectedLanguages;a=a.setSelectedLanguages;var g;f.includes(d)?g=f.filter(function(a){return a!==d}):(g=[].concat(f,[d]),e!=null&&d===e&&G({availableAudioTracks:b,controller:c,originalVideoLanguage:e}));a(g);return g},G=function(a){var b=a.availableAudioTracks,c=a.controller;a=a.originalVideoLanguage;if(a!=null&&c!=null&&b!=null){a=b.find(function(a){return a.role==null});a!=null&&(c==null||c.selectVideoVariant({lang:a.lang,role:a.role}))}},H=function(a){var b=a.onClose,e=a.rating,f=a.ratingDetails,g=a.selectedReasons,h=a.targetAudioLang;a=a.video_id;var i={event:"fb_reel_auto_dub_feedback",extra_data:{feedback:f!=null?f:"",player_type:"Reel",rating_reasons:JSON.stringify(g),selected_language:h!=null?h:"unknown",selected_rating:e!=null?e:"unknown"},video_id:a!=null?String(a):""};c("AutoDubbingFalcoEvent").log(function(){return i});b();d("cometPushToast").cometPushToast({message:d("CometVideoPlayerAutoDubbingWWWStrings").AUDIO_LANGUAGE_RATE_TOAST,withoutCloseButton:!0},2e3)},I=function(a,b){var d={client_extra_data:{languages:a.join(",")},event:"fb_reel_auto_dub_consumption_do_not_translate_languages_changed",video_id:b!=null?String(b):""};c("AutoDubbingConsumptionFalcoEvent").log(function(){return d})};function J(){var a=d("react-compiler-runtime").c(2),b=d("CometRelay").useMutation(d("CometAudioLanguageMenuItemsMutation").setDoNotTranslateLanguageDataMutation),c=b[0];a[0]!==c?(b=function(a,b){c({onCompleted:function(){I(a,b)},onError:K,optimisticResponse:{audio_settings:{do_not_translate_languages_string:a,id:b}},variables:{input:{language_codes:a}}})},a[0]=c,a[1]=b):b=a[1];return b}function K(){}function L(a,b){return c("useVideoPlayerControllerSubscriptionProvidingNullableController")(a,b)}var M=function(a,b,d,e){var f={client_extra_data:{fromTrackId:d!=null?d:"",reason:a,toTrackId:e!=null?e:""},event:"fb_reel_auto_dub_consumption_logger_error",video_id:b!=null?b:""};c("AutoDubbingConsumptionFalcoEvent").log(function(){return f})},N=function(a,b,c,d){var e=b==null&&(c==null?void 0:c.role)==="dub"||(b==null?void 0:b.id)!=null&&(c==null?void 0:c.id)!==(b==null?void 0:b.id),f=null;e&&(a==null?(e=!1,f="availableAudioTracks is null"):c==null?e=!1:a!=null&&b!=null&&a.find(function(a){return a.id===b.id})==null?(e=!1,f="fromTrack is not in availableAudioTracks"):a!=null&&c!=null&&a.find(function(a){return a.id===c.id})==null?(e=!1,f="toTrack is not in availableAudioTracks"):(b==null?void 0:b.id)!=null&&(b==null?void 0:b.id)===(c==null?void 0:c.id)?(e=!1,f="fromTrack and toTrack are the same"):b==null&&(c==null?void 0:c.role)!=="dub"&&(e=!1,f="toTrack is not dubbed"));!e&&f!=null&&M(f,d,b==null?void 0:b.id,c==null?void 0:c.id);return e};function O(a,b,c,e){var f=d("react-compiler-runtime").c(6),g=o(null),h,i;f[0]!==e||f[1]!==c||f[2]!==b||f[3]!==a?(h=function(){var d=N(e,g.current,a,c);if(d){d=r((d=g.current)!=null?d:null,b);g.current==null&&d==null&&(d=b);var f=r(a,b);q(d,f,(f=(d=g.current)==null?void 0:d.role)!=null?f:null,(d=a==null?void 0:a.role)!=null?d:null,"fb_reel_auto_dub_consumption",c!=null?c:"")}g.current=a},i=[a,b,c,e],f[0]=e,f[1]=c,f[2]=b,f[3]=a,f[4]=h,f[5]=i):(h=f[4],i=f[5]);n(h,i)}g.logConsumptionLanguageChange=q;g.getSelectedLanguage=r;g.logInitialDubbingConsumption=m;g.useGetDubTrackMapping=a;g.getOriginalLanguage=s;g.useGetAllAvailableTracks=e;g.useGetUserSelectedDoNotTranslateLanguageList=f;g.useGetCurrentDoNotTranslateLanguages=u;g.changePreferredLanguage=v;g.useSaveAndLogPreferredLanguage=w;g.useUserPreferredLanguage=z;g.useAllTransalateableLanguages=B;g.changeUserPreferredDoNotTranslateLanguages=F;g.changeAudioToOriginalLanguage=G;g.logTransalationRating=H;g.logDoNotTranslateLanguageSave=I;g.useSaveAndLogDoNotTranslateLanguages=J;g.useProvidedControllerSubscription=L;g.useLogTargetAudioChange=O}),98);
__d("FDSResizeUpFilled20Icon",["cr:14081"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:14081")}),98);
__d("StoriesClosedCaptionContextProvider.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext;c.useMemo;var k=c.useState,l=e({isCaptionsVisible:null,selectedLocale:null,setIsCaptionsVisible:function(){},setSelectedLocale:function(){}});function a(a){var b=d("react-compiler-runtime").c(6);a=a.children;var c=k(""),e=c[0];c=c[1];var f=k(null),g=f[0];f=f[1];b[0]!==g||b[1]!==e?(f={isCaptionsVisible:g,selectedLocale:e,setIsCaptionsVisible:f,setSelectedLocale:c},b[0]=g,b[1]=e,b[2]=f):f=b[2];c=f;g=c;b[3]!==a||b[4]!==g?(e=i.jsx(l.Provider,{value:g,children:a}),b[3]=a,b[4]=g,b[5]=e):e=b[5];return e}function b(){return j(l)}g.StoriesClosedCaptionContextProvider=a;g.useStoriesClosedCaptionContext=b}),98);
__d("StoriesVideoPlayerControllerContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({controller:null,setController:function(){}});g["default"]=b}),98);
__d("StoriesViewerPersonalizationContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b={enablePersonalization:!0};c=a.createContext(b);g["default"]=c}),98);